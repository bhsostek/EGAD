<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: fileTreeWidget.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: fileTreeWidget.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Widget = require('./widget');
let fileManager;

class FileTreeWidget extends Widget{
    /**
     * @constructor
     * @augments Widget
     * @param {Integer} x - This is the Column that this widget should be added to.
     * @param {Integer} y - This is the row of of the Column that this widget should be added to.
     * @param {FileManager} fileManager - This is a reference to the fileManager class.
     * @returns {FileTreeWidget} Returns a FileTreeWidget, an instance of the Widget class.
     */
    constructor(x, y, path, fileManager){
        super({name:"File Browser", col:x, row:y, path:path}, {});
        this.fileManager = fileManager;
    }

    /**
     * This function recursively opens subdirectories from the given path, and then produces a file-tree object
     * to be displayed within this file browser widget.
     * @abstract
     * @returns {Promise} Returns an asynchronous promise that will resolve on tree generation.
     */
    async init(){
        return await new Promise(async (resolve, reject) => {
            this.fileManager.getProjectFiles(this.translateRelative()).then(async (result) => {
                let elm = document.createElement('div');
                await setTimeout(() => {
                    // console.log("result:",JSON.stringify(result));
                    $(elm).fancytree({
                        checkbox: false,
                        selectMode: 3,
                        source: {children:result},
                        activate: function(event, data) {
                            $("#statusLine").text(event.type + ": " + data.node);
                        },
                        select: function(event, data) {
                            $("#statusLine").text(
                                event.type + ": " + data.node.isSelected() + " " + data.node
                            );

                        },
                        dblclick:(event, data) => {
                           this.doubleClick(event, data);
                        },
                    });
                    this.isLoaded = true;
                }, 0);
                super.setElement(elm);
                resolve(this);
            }, function(err) {
                reject(err);
            });
        });
    }

    translateRelative(){
        if(this.configData['path'].startsWith('~')) {
            this.configData['path'] = this.configData['path'].replace('~', this.fileManager.PATH);
        }
        console.log("Path:", this.configData['path']);
        return this.configData['path'];
    }

    doubleClick(event, data){
        console.log("Event:", event);
        console.log("Data:", data)
    }
};

module.exports = FileTreeWidget;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FileTreeWidget.html">FileTreeWidget</a></li><li><a href="FileManager.html">FileManager</a></li><li><a href="Grid.html">Grid</a></li><li><a href="Widget.html">Widget</a></li></ul><h3>Global</h3><ul><li><a href="global.html#onCloseRequested">onCloseRequested</a></li><li><a href="global.html#open">open</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Apr 07 2019 16:32:21 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
